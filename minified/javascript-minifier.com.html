<html><head><style>
body,
html {
  background-color: #020;
  margin: 0px;
}

canvas {
  z-index: 2;
  position: absolute;
  margin-left: 30%;
  width: 40%;
  border: 3 px solid #020;
  -webkit-transform: perspective(600px) rotateX(30deg);
  transform: perspective(600px) rotateX(30deg);
  border: 10px inset #00A808;
  border-radius: 10px;
}
</style></head><body> <canvas id=c onload=playMusic width=600 height=600></canvas><script>zzfx_v=.5,zzfx_x=new AudioContext,zzfx=((e,t,s,r=1,i=.1,a=0,n=0,o=0,l=0)=>{let d=44100,h=Math.PI;s*=2*h/d,s*=1+t*(2*Math.random()-1),a*=1e3*h/d**2,i*=0|(r=0<r?d*(10<r?10:r)|0:1),o*=2*h/d,l*=h,t=[];for(var p=0,u=0,c=0;c<r;++c)t[c]=e*zzfx_v*Math.cos(p*s*Math.cos(u*o+l))*(c<i?c/i:1-(c-i)/(r-i)),p+=1+n*(2*Math.random()-1),u+=1+n*(2*Math.random()-1),s+=a;return e=zzfx_x.createBuffer(1,r,d),s=zzfx_x.createBufferSource(),e.getChannelData(0).set(t),s.buffer=e,s.connect(zzfx_x.destination),s.start(),s});let r=Math.random,frame=0,l=frame,lag=0,started=0;c=document.getElementById("c"),x=null,window.onmousemove=(e=>{l||(playMusic(),l=1,console.log("loaded"),x=c.getContext("2d"),document.addEventListener("keydown",keydown,!0),document.addEventListener("keyup",keyup,!0),anim())}),document.body.onload=(e=>{l||(playMusic(),l=1,console.log("loaded"),x=c.getContext("2d"),document.addEventListener("keydown",keydown,!0),document.addEventListener("keyup",keyup,!0),anim())});let pressedKeys={};radarItems=[];let keyExists=e=>"32.38.40.37.39.77.69.87.65.83.68".split(".").indexOf(e.toString())>-1;function keydown(e){pressedKeys[e.keyCode]||(pressedKeys[e.keyCode]=1,keyExists(e.keyCode)&&zzfx(.2,.1,1319,.05,.34,.9,1,3.6,.47))}function keyup(e){pressedKeys[e.keyCode]=0,keyExists(e.keyCode)&&zzfx(.2,.1,219,.05,.9,.9,2,3.6,.47)}function background(e){if(lag)x.fillStyle="#141",x.fillRect(0,0,600,600);else for(R=frame/20,i=0;i<=30;i++)for(j=0;j<=30;j++)x.fillStyle=`hsl(${100+20*(S=Math.sin,S)(S(i+R)*vX+S(j+R)*vY+((i-14.5)**2+(j-14.5)**2)**.5-R)},99%,${e}%)`,x.fillRect(20*i,20*j,20,20)}let MusicSounds={kick:function(){zzfx(.9,.1,257,.2,.08,0,2,.2,.3)},hat:function(){zzfx(.2,1,9999,.1,.1,0,4,0,0)},snareclap:function(){zzfx(.2,0,777,.3,0,0,4,0,0)},synth:function(e,t=1){zzfx(.2,.01,440*(2**(1/12))**e,t,.1,0,0,0,0)},sub:function(e){zzfx(1,.01,440*(2**(1/12))**e,1,.1,.2,.2,.2,.2)}},melodyShift=69;function melodyShuffle(e){let t,s,r;for(r=e.length-1;r>0;r--)t=Math.floor(Math.random()*(r+1)),s=e[r],e[r]=e[t],e[t]=s;return e}SoundPatterns={beat:(beat=[MusicSounds.kick,null,MusicSounds.hat,null,MusicSounds.snareclap,null,MusicSounds.hat,null]).concat(beat),melody:[0,8,7,3,0,8,7,1,0,12,11,7,8,7,1,0],melody2:[0,8,7,3,0,8,7,1,0,12,11,7,8,7,1,0].map(z=(e=>e-7)),sub:[-24,null,null,null,-27,null,null,null,-32,null,null,null,-31,null,null,null]};let tempo=250,sq=0;function playMusic(){for(soundID in SoundPatterns.beat)sound=SoundPatterns.beat[soundID],note=SoundPatterns.melody[soundID],null!==sound&&setTimeout(sound,soundID*tempo);for(noteID in SoundPatterns.melody)setTimeout(e=>{noteInfo=sq%64<32?SoundPatterns.melody[sq%16]:SoundPatterns.melody2[sq%16],MusicSounds.synth(noteInfo,.1+r()/3),sq++},noteID*tempo);for(subID in SoundPatterns.sub)setTimeout(e=>{subInfo=SoundPatterns.sub[sq%16],null!=subInfo&&MusicSounds.sub(subInfo-24)},subID*tempo);sq%256==0&&melodyShuffle(SoundPatterns.melody2),mute||setTimeout(playMusic,16*tempo)}function text(e,t,s,r,i,a,n=0){for(charIndex in x.font=`${r}em monospace`,e){let o=e[charIndex];x.fillStyle="#000",x.fillText(o,t+charIndex*r*8+3*Math.cos(frame/10+charIndex),s+Math.sin(frame/20+charIndex/2)*i+3*Math.sin(frame/10+charIndex)),x.fillStyle=a,n&&(Math.sin(12*charIndex+Math.cos(charIndex/5+frame/30)+frame/10)>.5&&(x.fillStyle="red"),x.strokeStyle="#aa0",x.strokeText(o,t+charIndex*r*8,s+Math.sin(frame/20+charIndex/2)*i)),x.fillText(o,t+charIndex*r*8,s+Math.sin(frame/20+charIndex/2)*i)}}let q=1,qIncreases=0;function menu(){x.font="5em monospace",background(30*q),text("PRESS SPACE TO START",60+(q-1)*(r()-.5)*200,300-100*q-2e3*(q-1),3,10,"#a41"),text("you can't go",100+(q-1)*(r()-.5),400*q+(q-1)*(r()-.5),2,5+frame%5,"blue"),text("back",200+100*q,400+200*(q-1),2-5*(q-1),20*r()/(1/q),"red"),text("in a world that changes every step",100+(q-1)*(r()-.5)*200,450-300*(q-1),1.5,5*Math.sin(frame/5+r()/4),"navy"),text("made by kipkat",20,600-20*q,1.4,0,"#242"),pressedKeys[32]&&!qIncreases&&(qIncreases=1,zzfx(1,.1,23,.7,.61,0,2.7,1.5,.38)),q<-100&&(started=1,zzfx(1,.1,23,.7,.61,0,2.7,1.5,.38)),qIncreases&&(q-=.01)}let vX=0,vY=0;function character(e,t,s,r,a=40){for(x.fillStyle=`hsl(${250+20*s},99%,50%)`,x.beginPath(),i=5;i--;)x.arc(e+Math.sin(z=Math.PI/2*i+s)*a,t+Math.cos(z)*a,0,0,0);for(x.fill(),x.strokeStyle=`hsl(${250+20*r},89%,20%)`,x.lineWidth=2,x.stroke(),x.fillStyle=`hsl(${250+20*r},89%,20%)`,x.beginPath(),i=5;i--;)x.arc(e+Math.sin(z=Math.PI/2*i+r)*a*3/4,t+Math.cos(z)*a*3/4,0,0,0);x.fill(),x.strokeStyle=`hsl(${250+20*s},99%,50%)`,x.lineWidth=2,x.stroke()}function drawEnemy(e,t,s,a){for(x.fillStyle="#000",x.beginPath(),i=5;i--;)x.arc(e+20*Math.sin(z=Math.PI/2*i+s*a/49+Math.sin(frame/15)),t+20*Math.cos(z),0,0,0);x.fill(),x.lineWidth=3,x.strokeStyle="red",x.stroke(),radarItems.push(["red",e,t]),r()<.001&&enemyList.length<5&&spawnEnemy(e,t)}let enemyList=[],isGeneratorVisible=!1;function spawnEnemy(e,t){zzfx(.3,.1,700,1,.5,0,0,0,0),enemyList.push({X:e,Y:t,vX:0,vY:0,speed:.01+r()/3})}let getHr=()=>800*r()-100;aiBotOn=0;let mute=0;function controls(){let e=0,t=0;r()<.007+(maxHealth-3)/3e3&&(e=1),r()<.006-activatedGenerators.length/9e3&&(t=1),pressedKeys[38]&&(vY-=.5,e&&started&&spawnEnemy(getHr(),-100),t&&!isGeneratorVisible&&(spawnGenerator(getHr(),-100),isGeneratorVisible=!0),r()<.005&&pickups.push(new oHealing(getHr(),-100)),r()<.002&&!praying&&pickups.push(new oTotem(getHr(),-100)),r()<.004&&pickups.push(new oSpeedus(getHr(),-100)),r()<.001&&pickups.push(new oHeart(getHr(),-100))),pressedKeys[40]&&(vY+=.5,e&&started&&spawnEnemy(getHr(),650),t&&!isGeneratorVisible&&(spawnGenerator(getHr(),650),isGeneratorVisible=!0),r()<.003&&pickups.push(new oHealing(getHr(),-100)),r()<.002&&!praying&&pickups.push(new oTotem(getHr(),-100)),r()<.004&&pickups.push(new oSpeedus(getHr(),-100)),r()<.001&&pickups.push(new oHeart(getHr(),-100))),pressedKeys[37]&&(vX-=.5,e&&started&&spawnEnemy(-100,getHr()),t&&!isGeneratorVisible&&(spawnGenerator(-100,getHr()),isGeneratorVisible=!0),r()<.003&&pickups.push(new oHealing(getHr(),-100)),r()<.002&&!praying&&pickups.push(new oTotem(getHr(),-100)),r()<.004&&pickups.push(new oSpeedus(getHr(),-100)),r()<.001&&pickups.push(new oHeart(getHr(),-100))),pressedKeys[39]&&(vX+=.5,e&&started&&spawnEnemy(650,getHr()),t&&!isGeneratorVisible&&(spawnGenerator(650,getHr()),isGeneratorVisible=!0),r()<.003&&pickups.push(new oHealing(getHr(),-100)),r()<.002&&!praying&&pickups.push(new oTotem(getHr(),-100)),r()<.004&&pickups.push(new oSpeedus(getHr(),-100)),r()<.001&&pickups.push(new oHeart(getHr(),-100))),pressedKeys[76]&&(grassPositions.length=500,bloodPositions.length=200,lag=1),pressedKeys[87]&&fireBullet(0,-1*r()-5),pressedKeys[65]&&fireBullet(-1*r()-5,0),pressedKeys[83]&&fireBullet(0,1*r()+5),pressedKeys[68]&&fireBullet(1*r()+5,0),1==pressedKeys[192]&&(aiBotOn||(aiBotOn=1,aiHandle=setInterval(e=>{for(p of(pressedKeys[69]=1,pickups))"pickupHealing"==p.constructor.name&&health>=maxHealth||"pickupTotem"==p.constructor.name&&praying||(pressedKeys[39]=pressedKeys[37]=0,p.X>300?pressedKeys[39]=1:pressedKeys[37]=1,pressedKeys[38]=pressedKeys[40]=0,p.Y>300?pressedKeys[40]=1:pressedKeys[38]=1);for(g of generators){if(g.which-1!=lastActiveGenerator)break;pressedKeys[39]=pressedKeys[37]=0,g.x>300?pressedKeys[39]=1:pressedKeys[37]=1,pressedKeys[38]=pressedKeys[40]=0,g.y>300?pressedKeys[40]=1:pressedKeys[38]=1}if(0==enemyList.length)frame%100==0&&(pressedKeys[[38,40,39,37][Math.floor(4*r())]]=1);else{let e=eY=0;for(q of enemyList)e+=q.X,eY+=q.Y;e/=enemyList.length,eY/=enemyList.length,pressedKeys[39]=pressedKeys[37]=0,e<300?(pressedKeys[39]=1,r()<.5&&fireBullet(-5,2*(r()-.5))):(pressedKeys[37]=1,r()<.5&&fireBullet(5,2*(r()-.5))),pressedKeys[38]=pressedKeys[40]=0,eY<300?(pressedKeys[40]=1,r()<.5&&fireBullet(2*(r()-.5),-5)):(pressedKeys[38]=1,r()<.5&&fireBullet(2*(r()-.5),5))}},100)))}let grassPositions=[],bloodPositions=[],generators=[],activatedGenerators=[],lastActiveGenerator=0,bullets=[];for(i=999;i--;)grassPositions.push({x:getHr(),y:getHr(),color:`hsl(${100+10*r()|0},${90*r()|0}%,${30+10*r()|0}%)`,perspective:1+r()/10,height:-10-20*r()}),r()<.4&&bloodPositions.push({x:getHr(),y:getHr(),size:[20*r(),20*r()],rot:r()*Math.PI,color:`hsla(${50*r()|0},${50+49*r()|0}%,${30*r()|0}%,0.3)`,perspective:1-r()/9});function enemies(){for(enemy of enemyList)drawEnemy(enemy.X,enemy.Y,enemy.vX,enemy.vY),enemy.X>300?enemy.vX>-12&&(enemy.vX-=enemy.speed):enemy.vX<12&&(enemy.vX+=enemy.speed),enemy.Y>300?enemy.vY>-12&&(enemy.vY-=enemy.speed):enemy.vY<12&&(enemy.vY+=enemy.speed),enemy.X+=enemy.vX/2,enemy.Y+=enemy.vY/2,enemy.X-=vX,enemy.Y-=vY,(A=Math.abs)(z=enemy.X-300)<35&&A(z=enemy.Y-300)<35&&(praying?(enemy.vX*=-1.2,enemy.vY*=-1.2,enemy.X+=2*enemy.vX,enemy.Y+=2*enemy.vY,zzfx(1,.1,1309,.2,.59,.1,2.5,0,.43)):(vX=5*enemy.vX,vY=5*enemy.vY,enemy.vX*=-1,enemy.vY*=-1,zzfx(1,.1,160,.1,.45,5,4.1,8.6,.93),health--));for(i in enemyList){let e=enemyList[i];(e.X<-100||e.Y<-100||e.X>700||e.Y>700)&&(enemyList.splice(i,1),zzfx(.5,.1,409,0,1,.37,0,0,.24))}}function grass(){for(grassBlock of grassPositions)x.fillStyle=grassBlock.color,x.fillRect(grassBlock.x,grassBlock.y,2,grassBlock.height),grassBlock.x-=vX*grassBlock.perspective,grassBlock.y-=vY*grassBlock.perspective,grassBlock.x<-100&&(grassBlock.x=700,grassBlock.y=getHr()),grassBlock.y<-100&&(grassBlock.x=getHr(),grassBlock.y=700),grassBlock.x>700&&(grassBlock.x=-100,grassBlock.y=getHr()),grassBlock.y>700&&(grassBlock.x=getHr(),grassBlock.y=-100),(A=Math.abs)(z=grassBlock.x-300)<50&&A(z=grassBlock.y-300)<50&&(grassBlock.x+=z/20,grassBlock.y+=z/20),lag||(grassBlock.x+=Math.sin(frame/5*grassBlock.perspective)/10)}let bulletRateLimit=0;function fireBullet(e,t){bulletRateLimit<0&&(bullets.push({x:300,y:300,vX:e+(r()-.5)/2,vY:t+(r()-.5)/2}),zzfx(1,.1,32,.2,.54,3,4.2,0,.42),bulletRateLimit=10)}function drawBullets(){for(bulletId in bullets){let e=bullets[bulletId];for(enemy of(x.beginPath(),x.fillStyle="#fff",x.ellipse(e.x,e.y,9,9,0,0,6.28),x.fill(),(e.x<-100||e.y<-100||e.x>700||e.y>700)&&bullets.splice(bulletId,1),e.x+=2*e.vX,e.y+=2*e.vY,e.x-=vX,e.y-=vY,enemyList))enemy.X<e.x?e.vX-=.04:e.vX+=.04,enemy.Y<e.y?e.vY-=.04:e.vY+=.04,((enemy.X-e.x)**2+(enemy.Y-e.y)**2)**.5<30&&(enemy.vX=3*e.vX,enemy.vY=3*e.vY,bullets.splice(bulletId,1))}bulletRateLimit--}function notBlood(){for(bloodPart of bloodPositions)x.fillStyle=bloodPart.color,x.beginPath(),x.ellipse(bloodPart.x,bloodPart.y,bloodPart.size[0],bloodPart.size[1],bloodPart.rot,0,7),x.fill(),bloodPart.x-=vX*bloodPart.perspective,bloodPart.y-=vY*bloodPart.perspective,bloodPart.x<-100&&(bloodPart.x=650,bloodPart.y=getHr()),bloodPart.y<-100&&(bloodPart.x=getHr(),bloodPart.y=650),bloodPart.x>650&&(bloodPart.x=-100,bloodPart.y=getHr()),bloodPart.y>650&&(bloodPart.x=getHr(),bloodPart.y=-100),(A=Math.abs)(z=bloodPart.x-300)<50&&A(z=bloodPart.y-300)<50&&(bloodPart.x+=z/10,bloodPart.y+=z/10)}function spawnGenerator(e,t){generators.push({which:Math.floor(1+r()*maxGenerators),x:e,y:t,rotation:0}),zzfx(.3,.1,550,.9,.48,5.8,0,21.7,.79)}function drawGenerators(){for(genId in generators){for(gen=generators[genId],i=0;i<9+gen.which;i++){let e=Math.floor(128*Math.sin(i*i*gen.which)+128);x.fillStyle=`rgb(${e},${e},${e})`,x.fillRect(gen.x,gen.y,50*Math.sin(gen.which**2+i*gen.which+gen.rotation),50*Math.cos(gen.which**2*i+gen.rotation)),activatedGenerators.indexOf(gen.which)>-1&&(gen.rotation+=.002)}text(gen.which.toString(),gen.x-20,gen.y-5,3.5,2,activatedGenerators.indexOf(gen.which)<0?"red":"lime"),gen.x-=vX,gen.y-=vY,radarItems.push(["lime",gen.x,gen.y]),(gen.x<-100||gen.x>700||gen.y<-100||gen.y>700)&&(generators.splice(genId,1),isGeneratorVisible=!1),((gen.x-300)**2+(gen.y-300)**2)**.5<100&&activatedGenerators.indexOf(gen.which)<0&&(lastActiveGenerator==gen.which-1?(text("Press E to activate generator",gen.x-220,gen.y-20,2,5,"#0ff"),pressedKeys[69]&&(activatedGenerators.push(gen.which),lastActiveGenerator=gen.which,zzfx(1,.1,127,.2,.63,0,0,28.9,.77),health<maxHealth&&health++)):(text("Can't activate",gen.x-100,gen.y-50,2,5,"red"),pressedKeys[69]&&frame%5==0&&zzfx(1,.1,464,.1,.3,.1,.5,3.6,.82)))}}let health=3;function drawLives(){for(i=0;i<health;i++)x.fillStyle="red",text("❤︎",10+25*i,590,2,2,"red")}let step=showHelp=1;function howToPlay(){text("You are trapped in a maze",20,700-step,2.8,5,"#ff0",0),text("To get back to your home",100,800-step,2,3,"#f00",0),text("you must turn on the generators",50,850-step,2,3,"#f00",0),text("in order. That will enable a bomb that",20,900-step,1.8,3,"#f00",0),text("will break this world.",110,950-step,2,3,"#f00",1),text("Everything disappears as you pass by it.",10,1e3-step,1.8,3,"#f00",1),text("Move with the arrow keys",800-step,1050-step,2,3.5,"#fff",1),text("Avoid the squares",850-step,1100-step,3,3,"#0f0",1),drawEnemy(1340-step,1090-step,step/20,step/30),text("Use W, A, S, D to fire",900-step,1150-step,2.4,3,"#000",1),text("Use E to interact with objects",950-step,1200-step,2.4,3,"#0a0",1),character(300,1526-step,(1226-step)/70,(1226-step)/100),step+=1}pickups=[];let tempHealth,oHealing=function(e,t){this.X=e,this.Y=t,this.id=r(),this.delete=function(){for(pkupId in pickups)pickups[pkupId].id==this.id&&pickups.splice(pkupId,1)},this.draw=function(){x.fillStyle="white",x.fillRect(this.X-20,this.Y-20,40,40),text("+",this.X-15,this.Y+10,4,1,"red"),radarItems.push(["blue",this.X,this.Y]),this.X-=vX,this.Y-=vY,((this.X-300)**2+(this.Y-300)**2)**.5<30&&(health<maxHealth?(text("Press E to heal",this.X-120,this.Y-30,2,3,"yellow"),pressedKeys[69]&&(health=maxHealth,tempHealth=maxHealth,this.delete(),zzfx(1,.1,426,.5,.04,0,.4,50.7,.68))):text("Your health is full",this.X-150,this.Y-30,2,3,"yellow")),(this.X<-100||this.Y<-100||this.X>700||this.Y>700)&&this.delete()}},oTotem=function(e,t){this.X=e,this.Y=t,this.id=r(),this.delete=function(){for(pkupId in pickups)pickups[pkupId].id==this.id&&pickups.splice(pkupId,1)},this.draw=function(){x.fillStyle="#110",x.fillRect(this.X-30,this.Y-30,60,60),x.fillRect(this.X-10,this.Y-50,20,20),x.fillRect(this.X-30,this.Y+30,20,50),x.fillRect(this.X+10,this.Y+30,20,50),x.strokeStyle="#221",x.strokeRect(this.X-30,this.Y-30,60,60),x.strokeRect(this.X-10,this.Y-50,20,20),x.strokeRect(this.X-30,this.Y+30,20,50),x.strokeRect(this.X+10,this.Y+30,20,50),radarItems.push(["blue",this.X,this.Y]),this.X-=vX,this.Y-=vY,((this.X-300)**2+(this.Y-300)**2)**.5<50&&(text(praying?"You are already praying":"Press E to pray to totem",this.X-180,this.Y-70,2,3,"yellow"),pressedKeys[69]&&!praying&&(praying=1,tempHealth=health,gs=`grayscale(${20*r()+80}%)`,c.style.filter=`hue-rotate(${100*(maxGenerators-5)}deg)`,document.body.style.filter=`hue-rotate(${100*(maxGenerators-5)}deg)`,document.body.style.filter+=gs,c.style.filter+=gs,prayHandle=setInterval(e=>{gs=`grayscale(${20*r()+80}%)`,c.style.filter=`hue-rotate(${100*(maxGenerators-5)}deg)`,document.body.style.filter=`hue-rotate(${100*(maxGenerators-5)}deg)`,document.body.style.filter+=gs,c.style.filter+=gs,health=tempHealth},1e3),setTimeout(e=>{praying=0,clearInterval(prayHandle),c.style.filter=`hue-rotate(${100*(maxGenerators-5)}deg)`,document.body.style.filter=`hue-rotate(${100*(maxGenerators-5)}deg)`,zzfx(1,.5,400,2,.5,.1,.9,.15,0)},7777),this.delete(),zzfx(1,.5,400,2,.5,.1,.9,.15,0))),(this.X<-100||this.Y<-100||this.X>700||this.Y>700)&&this.delete()}},maxSpeed=1.07,oSpeedus=function(e,t){this.X=e,this.Y=t,this.id=r(),this.delete=function(){for(pkupId in pickups)pickups[pkupId].id==this.id&&pickups.splice(pkupId,1)},this.draw=function(){x.fillStyle="blue",x.fillRect(this.X-20,this.Y-20,40,40),x.strokeStyle=`hsl(${frame/2},99%,50%)`,x.strokeRect(this.X-24,this.Y-24,48,48),text("SPD",this.X-21,this.Y+10,2,1,"lime"),radarItems.push(["blue",this.X,this.Y]),this.X-=vX,this.Y-=vY,((this.X-300)**2+(this.Y-300)**2)**.5<30&&(text("Press E to use",this.X-110,this.Y-30,2,3,"yellow"),pressedKeys[69]&&(maxSpeed=.8,this.delete(),zzfx(1,.1,426,.5,.04,0,.4,50.7,.68),c.style.filter+="sepia(80%)",setTimeout(e=>{c.style.filter=c.style.filter.replace("sepia(80%)","")},500))),(this.X<-100||this.Y<-100||this.X>700||this.Y>700)&&this.delete()}},oHeart=function(e,t){this.X=e,this.Y=t,this.id=r(),this.delete=function(){for(pkupId in pickups)pickups[pkupId].id==this.id&&pickups.splice(pkupId,1)},this.draw=function(){text("+❤",this.X-20,this.Y+5,3,1,"lime"),radarItems.push(["cyan",this.X,this.Y]),this.X-=vX,this.Y-=vY,((this.X-300)**2+(this.Y-300)**2)**.5<40&&(text("Press E to use",this.X-110,this.Y-30,2,3,"yellow"),pressedKeys[69]&&(health++,this.delete(),zzfx(1,.1,426,.5,.04,0,.4,50.7,.68))),(this.X<-100||this.Y<-100||this.X>700||this.Y>700)&&this.delete()}},maxGenerators=5,maxHealth=3;function levelUp(){zzfx(.6,.1,1,.5,.93,.4,.9,50,0),activatedGenerators.length=[],lastActiveGenerator=0,maxGenerators++,health=++maxHealth,c.style.filter=`hue-rotate(${100*(maxGenerators-5)}deg)`,document.body.style.filter=`hue-rotate(${100*(maxGenerators-5)}deg)`,vY=vX=2e3*(r()-.5),tempo-=10}function drawRadar(){for(itemOnRadar of(x.drawImage(c,505,505,70,70),x.fillStyle="#111a",x.strokeStyle="#222a",x.fillRect(500,500,80,80),x.strokeRect(500,500,80,80),radarItems))x.fillStyle=itemOnRadar[0],x.fillRect(itemOnRadar[1]/10+508,itemOnRadar[2]/10+508,4,4),x.beginPath(),x.moveTo(540,540),x.strokeStyle=itemOnRadar[0],x.lineTo(itemOnRadar[1]/10+510,itemOnRadar[2]/10+510),x.stroke(),x.closePath();radarItems=[]}let praying=!1;function anim(){if(started){for(pkup of(background(10),notBlood(),grass(),drawGenerators(),pickups))pkup.draw();enemies(),drawBullets(),character(300,300,vX,vY),praying||drawLives(),text("Generators left: "+(maxGenerators-lastActiveGenerator).toString(),5,25,2,1,"#af2"),drawRadar(),controls(),pressedKeys[77]&&(mute=1),vX/=maxSpeed,vY/=maxSpeed,maxSpeed<1.07&&(maxSpeed+=.01),health<1&&(started=!1,background(0),enemyList=[],generators=[],vX=900*(r()-.5),vY=900*(r()-.5)),activatedGenerators.length==maxGenerators&&levelUp()}else health<1?(background(5),text("YOU DIED!",120,300,r()/4+5,9*r(),"red"),vX=0,vY=0,text("Press space to reset",30,400,3.27,3,"yellow"),activatedGenerators.length=[],lastActiveGenerator=0,isGeneratorVisible=!1,pickups.length=[],aiBotOn&&(pressedKeys[32]=1),pressedKeys[32]&&(health=maxHealth),pressedKeys[32]=0):(menu(),step<1400&&qIncreases&&howToPlay(),step>1225&&(started=1),pressedKeys[77]&&(mute=1));requestAnimationFrame(anim,frame++)}</script>
</body></html>
